<div class="app-main main">

  <div class="app-main__outer">

    <!-- side nav -->
    <div class="app-sidebar sidebar-shadow sideBar">
      <div class="app-header__logo">
        <div class="logo-src"></div>
        <div class="header__pane ml-auto">
          <div>
            <button type="button" class="hamburger close-sidebar-btn hamburger--elastic" data-class="closed-sidebar">
                                    <span class="hamburger-box">
                                        <span class="hamburger-inner"></span>
                                    </span>
            </button>
          </div>
        </div>
      </div>
      <div class="app-header__mobile-menu">
        <div>
          <button type="button" class="hamburger hamburger--elastic mobile-toggle-nav">
                                <span class="hamburger-box">
                                    <span class="hamburger-inner"></span>
                                </span>
          </button>
        </div>
      </div>
      <div class="scrollbar-sidebar">
        <div class="app-sidebar__inner">
          <ul  class="vertical-nav-menu navMenu">
            <li class="app-sidebar__heading sideBarHeading">
              <i class="fa fa-clock"></i>
              Schedules
              <span class="buttons">
                  <button (click)="addSchedule()" mat-raised-button matTooltip="Add Schedule" class="btn btn-outline-primary addSch" ><span class="fas fa-plus"></span></button>
             <span *ngIf="plannings.length>0">
                <span *ngIf="selectedCount < plannings.length" (click)="showAll()" mat-raised-button matTooltip="Show all" class="fa fa-check-circle showAll"></span>
                <span *ngIf="selectedCount === plannings.length" (click)="hideAll()" mat-raised-button matTooltip="Hide all" class="fa fa-times-circle showAll hideAll"></span>
              </span>
                </span>

              <br><br><br>
              <div  *ngIf="plannings.length>0" class="search-wrapper wrapper">
                <div class="searchContainer" [ngClass]="{'search-wrapper active': showHideInput}">
                  <div  class="input-holder holder">
                    <input type="text" [(ngModel)]="searchText" class="search-input searchInput" placeholder="Search...">
                    <button (click)="showHideInput = true;" class="search-icon"><span></span></button>
                  </div>
                  <button (click)="showHideInput = false;" class="close closeSearchButt"></button>
                </div>
              </div><br>
            </li>
            <li (click)="showHideSch(pl)" class="schItem" *ngFor="let pl of plannings  | filter:searchText">
            <span class="schIconSpan" [ngClass]="pl.schedule.colorIcon">
                <i [ngStyle]="{'opacity':pl.schedule.showSch? '1' : '0' }" class="fa fa-check-circle">
                </i>
              </span>
              {{pl.schedule.scheduleName}}<span class="planDays" matTooltip="Planned days">{{planningDaysDesc(pl)}}</span>
            </li>
          </ul>
        </div>
      </div>
    </div>


    <!--body-->
    <div class="bodyContainer">
      <div *ngIf="plannings.length<=0" class="main-card mb-3 card bodyCard">
        <div class="card-body noSchBod">
          <div class="noSchContainer">
            No schedules to show<br><br>
            <button class="btn btn-primary" (click)="addSchedule()">Add schedule</button>
          </div>
        </div>
      </div>
      <div  *ngIf="plannings.length>0" class="main-card mb-3 card schCard">
        <div class="card-header">
          Time table
        </div>
        <div class="card-body schBody">
          <table class="table-hover mat-calendar-table-header tableHeader">
            <thead>
            <tr class="d-table-row">
              <th class="emptyTh"></th>
              <th *ngFor="let hour of hours">
                <span *ngIf="hour<10">0</span>{{hour}}:00
              </th>
            </tr>
            </thead>
            <tbody>
            <tr class="d-table-row" *ngFor="let day of days">
              <td class="dayTd">
                {{day}}
              </td>
              <td class="hrouTd" style="padding: 5px 0 5px 0" *ngFor="let hour of hours" >
        <span *ngFor="let pl of plannings">
          {{checkSch(pl,day,hour)}}
          <span matTooltip="{{showTip(hour,pl)}}" [ngStyle]="{'width': startHour == hour && startMinutes !== 0 ? returnWidth(startMinutes) : endHour == hour && endMinutes !== 0 ? returnWidth(endMinutes) : '100%' , 'float': startHour == hour ? 'right' : 'left'}" *ngIf="showSch" [ngClass]="pl.schedule.color" class="schSpan" (click)="setCliked(pl,day,hour)"></span>
          <span *ngIf="!showSch && !showPause" class="btn btn-primary nothingSpan"></span>
          <span *ngIf="showPause" class="btn btn-secondary pauseSpan" matTooltip="Pause time"></span>
        </span>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
        <div class="card-footer">
          {{time | date: 'dd MMMM yyyy '}} <span class="time">{{ time | date: 'HH:mm:ss' }}</span>
        </div>

      </div>
    </div>

  </div>
</div>
